from PIL import Image

# 地圖數據
map_data = """
3003000303000000033003033033302333000003000403
3300032033303000333000303303330000300003000020
3000300333030333333033303033000030000000300030
0303000303003330033030030003303030000030000030
3303303000030333000313333303030000330000033300
0000330000000000003000300003030030303304003030
3303333030330003030320033333303302003300000004
0003000000233333333303030033230300000030220004
0202303003332003030333300033300000300000000300
0000003300030030233000003233033033300000003000
3232000200303202300030300033300000003000000000
0003333333033000223320000032303003000024333440
3023001022303303030003300033020000000040004340
3103013333333320101030020333300033302032300004
0033000322333333021033033203300000040040000000
2212130333000203000332003220300400033300000204
0330013132203002201323323323344033040400003020
1110033030100001020000344340342402000400004414
1101233331232322321302430300030340420440440044
0131011322021014310022403333034423044440443004
2101021201323312200322032202034023044400024244
1012111121123322113010313012240242004403444444
1032121102232023332322223243003204404044440444
1111021111113013301132002022023002400040244444
0111101013121112203202443240442234242444444404
1022111023001221122242210230040242444242444040
1111122121112212121221224424044444242440424444
2111111022212131312322222222202424444044244441
0111221211222022112200121322444220440024444244
1111122121202111211244222210222242412024444442
1111111111022122111212242242242042404402404442
1210121211202212111210242242422442444244444422
1122211122112112102421142444424244244444444444
1212211112222042121142112412242444444424444044
1122212111221022141202201422424244244444442240
1111221111221111210112124222422444222444244444
1211211122121121114114122221242224444424444444
1111111221221110121112242222222444444222444444
2112122121111211124244240224442444444442444224
2221112112212112122212224222444442442442442442
1111121221122122242221224444242424444242442444
1212211122122122122202104224222224220404444444
1111112211211211212222242244242124244444444424
1122111122212111221442224242244444424244444444
1111222212111212021222240424242244444444444424
1142221121112221422222222442244222442444424042
""".strip().split("\n")

# 地形對應的圖片檔案名
terrain_files = {
    "0": "data/mountain.png",
    "1": "data/river.png",
    "2": "data/grass.png",
    "3": "data/rock.png",
    "4": "data/riverstone.png",
}

# 單格大小
tile_width, tile_height = 64, 64

# 地圖尺寸
map_width = len(map_data[0])
map_height = len(map_data)

# 創建最終地圖圖像
output_image = Image.new("RGBA", (map_width * tile_width, map_height * tile_height))

# 填充地圖
for y, row in enumerate(map_data):
    for x, cell in enumerate(row):
        terrain_image = Image.open(terrain_files[cell])
        terrain_image = terrain_image.resize((tile_width, tile_height))
        output_image.paste(terrain_image, (x * tile_width, y * tile_height))

# 保存地圖為 PNG
output_path = "data/generated_map.png"
output_image.save(output_path)

output_path